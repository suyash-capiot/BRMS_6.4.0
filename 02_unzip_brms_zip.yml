-
  name: Unzip BRMS data on Target Server
  hosts: all
  become: true
  vars:
    target_user: brms
  tasks:
    - name: Change Permisssion of EAP-6.4.0.zip
      file:
        path=/home/{{ target_user }}/{{ item.dir }}
        owner="{{ target_user }}"
        group="{{ target_user }}"
      with_items:
        - { dir: EAP-6.4.0.zip }
        
    - name: Unzip BRMS Data
      unarchive:
        src: /home/{{ target_user }}/EAP-6.4.0.zip
        dest: /home/{{ target_user }}
        #remote_src: yes
        owner: "{{ target_user }}"
        group: "{{ target_user }}"
       
    - name: Change Permisssion of Directory
      file:
        path=/home/{{ target_user }}/{{ item.dir }}
        owner="{{ target_user }}"
        group="{{ target_user }}"
        recurse=yes
      with_items:
        - { dir: EAP-6.4.0 }
        - { dir: repositories }
        - { dir: .m2 }
        - { dir: .niogit }
        - { dir: .index }
